<h1 id="principle-prefer-providing-only-one-way-to-do-a-given-thing">Principle: Prefer providing only one way to do a given thing</h1>
<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

<!-- toc -->

<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#principle">Principle</a></li>
<li><a href="#applications-of-this-principle">Applications of this principle</a></li>
<li><a href="#caveats">Caveats</a>
<ul>
<li><a href="#specialized-syntax">Specialized syntax</a></li>
<li><a href="#non-obvious-alternatives">Non-obvious alternatives</a></li>
<li><a href="#in-evolution">In evolution</a></li>
</ul></li>
<li><a href="#alternatives-considered">Alternatives considered</a></li>
</ul>
<!-- tocstop -->

<h2 id="background">Background</h2>
<p>It's common in programming languages to provide multiple, similar ways of doing the same thing. Sometimes this reflects the legacy of a language, and difficulties in evolving in ways that would require changes to developer-authored code, thereby retaining backwards compatibility. Other times it reflects a desire to provide both verbose and concise versions of the same syntax. We are concerned with both forms.</p>
<p>We also are cautious about creating alternatives that may give rise to a <a href="https://en.wikipedia.org/wiki/The_Paradox_of_Choice">paradox of choice</a>, wherein options are similar enough that developers actively spend time analyzing tarde-offs, and the time spent that way outweighs the potential benefits of a correct choice.</p>
<p>Where multiple, similar implementation options exist, it can sometimes give rise to style guidelines to indicate a preferential choice; sometimes because one option is objectively better, but sometimes because making a choice is better than not making one. Even with a style guide, developers may diverge in style by accident or intent, choosing different coding patterns simply because either option works. It can also become an issue as developers move between an organization that they need to learn a new style guide, and relearn habits.</p>
<p>A couple examples of this in other languages are:</p>
<ul>
<li>In Perl, <a href="https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it">"There is more than one way to do it."</a></li>
<li>In Python, <a href="https://www.python.org/dev/peps/pep-0020/">"There should be one -- and preferably only one -- obvious way to do it."</a></li>
</ul>
<h2 id="principle">Principle</h2>
<p>In Carbon, we will prefer providing only one way to do a given thing. That is, given a syntax scenario where multiple design options are available, we will tend to provide <em>one</em> option rather than than providing several and letting users choose. This echoes Python's principle.</p>
<p>Minimizing choices serves several goals:</p>
<ul>
<li><a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#language-tools-and-ecosystem">Language tools</a> should be easier to write and maintain with the lower language complexity implied by less duplication of functionality.</li>
<li><a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#software-and-language-evolution">Software and language evolution</a> processes should find it easier to both consider existing syntax and avoid creation of new syntax conflicts.</li>
<li><a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#code-that-is-easy-to-read-understand-and-write">Understandability of code</a> should be promoted if developers have less syntax they need to understand. This can be expected to improve code quality and productivity so long as the resulting code structures aren't overly complicated.</li>
</ul>
<p>By minimizing the overlap of language features, we hope to make work easier for both Carbon's maintainers and developers.</p>
<h2 id="applications-of-this-principle">Applications of this principle</h2>
<p>We can observe the application of this principle by comparing several language features to C++. There, improving understandability is frequently the primary motivation:</p>
<ul>
<li>Where C++ allows logical operators to be written with either symbols (for example, <code>&amp;&amp;</code>) or text (for example, <code>and</code>), Carbon will only support one form (in this case, <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/proposals/p0680.md">text</a>).</li>
<li>Where C++ allows hexadecimal numeric literals to be either lowercase (<code>0xaa</code>) or uppercase (<code>0xAA</code>), and with <code>x</code> optionally uppercase as well, Carbon will only allow the <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/proposals/p0143.md"><code>0xAA</code> casing</a>.</li>
<li>Where C++ provides both <code>struct</code> and <code>class</code> with the only difference is access control defaults, Carbon will only provide one (<code>class</code>, albeit with default public visibility diverging from C++).</li>
</ul>
<p>However, sometimes language tools are the primary motivation. For example, where C++ allows braces to be omitted for single-statement control flow blocks, Carbon will <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/proposals/p0623.md">require braces</a>. This offers a syntax simplification that should allow for better error detection.</p>
<h2 id="caveats">Caveats</h2>
<h3 id="specialized-syntax">Specialized syntax</h3>
<p>Sometimes overlap will occur because a specialized syntax offers particular benefits, typically as a matter of convenience for either a common use-case or a particularly complex and important use-case. Some examples of why and where this occurs are:</p>
<ul>
<li>For <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#performance-critical-software">performance</a>, it may at times be necessary to provide a specialized syntax that better supports optimization than a generic syntax.</li>
<li>For <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#code-that-is-easy-to-read-understand-and-write">understandability of code</a>, there may be times that a particular use-case is common enough that simplifying its syntax provides substantial benefit.
<ul>
<li>For example, <code>for (var x: auto in list)</code> could typically be written with as a <code>while</code> loop, but range-based for loops are considered to improve understandability. However, C++'s <code>for (;;)</code> syntax is sufficiently close to <code>while</code> that we expect to use <code>while</code> to address the corresponding use-cases.</li>
</ul></li>
<li>For <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#interoperability-with-and-migration-from-existing-c-code">migration and interoperability</a>, it may be pragmatic to provide both an ideal way of doing things for new Carbon code, and a separate approach that is more C++-compatible for migration.
<ul>
<li>For example, consider generics and templates: generics are considered to be the preferred form for new code, but templates are considered a necessity for migration of C++ code. This is not an evolution situation because we do not anticipate ever removing templates.</li>
</ul></li>
</ul>
<h3 id="non-obvious-alternatives">Non-obvious alternatives</h3>
<p>Echoing Python, there may be non-obvious alternative ways of doing a given thing, such as using <code>while (condition) { DoSomething(); break; }</code> in place of <code>if (condition) { DoSomething(); }</code>. As a more complex example, lambdas could be implemented using other code constructs; this would require significantly more code and hinder understandability.</p>
<p>This kind of overlap may exist, but will hopefully be considered sufficiently non-idiomatic that examples won't be common in code. If a choice would not likely be based mainly on coding styles, it's likely sufficiently distinct that this principle won't apply.</p>
<h3 id="in-evolution">In evolution</h3>
<p>For <a href="https://github.com/carbon-language/carbon-lang/tree/trunk/docs/project/goals.md#software-and-language-evolution">evolution</a>, it will often be necessary to temporarily provide an "old" and "new" way of doing things simultaneously.</p>
<p>For example, if renaming a language feature, it may be appropriate to provide the same functionality under two identifiers. However, one should be marked as deprecated and eventually removed. We should be cautious of adding new, overlapping features without a plan to remove the corresponding legacy version.</p>
<h2 id="alternatives-considered">Alternatives considered</h2>
<ul>
<li><a href="https://github.com/carbon-language/carbon-lang/tree/trunk/proposals/p0829.md#provide-multiple-ways-of-doing-a-given-thing">Provide multiple ways of doing a given thing</a></li>
</ul>
